<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CPS Tester • Akash Rawat</title>
  <meta name="description" content="CPS (Clicks Per Second) tester. Made by Akash Rawat." />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%23ffd54a'/%3E%3Cstop offset='1' stop-color='%23ffb300'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='64' height='64' rx='16' fill='%230a0a0a'/%3E%3Cpath d='M18 34c0-8 6-14 14-14h14v8H32c-3 0-6 3-6 6v10h-8V34z' fill='url(%23g)'/%3E%3Cpath d='M46 30h-8v-8h8v8z' fill='%23ffd54a' opacity='.9'/%3E%3C/svg%3E" />
  <style>
    :root{
      --bg:#0a0a0a; --bg2:#0f0f0f; --card:#111; --line:#222;
      --text:#f3f3f3; --muted:#bdbdbd; --y:#ffd54a; --y2:#ffb300;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --r:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(900px 520px at 20% 10%, rgba(255,213,74,.10), transparent 60%),
        radial-gradient(900px 520px at 80% 15%, rgba(255,179,0,.08), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
    }
    .wrap{max-width:980px;margin:0 auto;padding:24px 16px 40px}
    header{
      display:flex;justify-content:space-between;gap:14px;align-items:flex-start;
      padding:14px 14px;border:1px solid var(--line);
      background:rgba(17,17,17,.75); border-radius:var(--r);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    }
    .brand{display:flex;gap:12px;align-items:center}
    .icon{
      width:44px;height:44px;border-radius:14px;display:grid;place-items:center;
      border:1px solid #2a2a2a;background:
        radial-gradient(14px 14px at 30% 30%, rgba(255,255,255,.18), transparent 60%),
        linear-gradient(135deg, rgba(255,213,74,.22), rgba(255,179,0,.12));
    }
    .icon svg{width:22px;height:22px;fill:var(--y)}
    h1{margin:0;font-size:16px;letter-spacing:.2px}
    .sub{margin:4px 0 0;font-size:12px;color:var(--muted);line-height:1.4}
    .credit{
      display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end
    }
    .pill{
      font-size:12px;color:var(--muted);
      border:1px solid var(--line);border-radius:999px;
      padding:10px 12px;background:rgba(0,0,0,.25);
    }
    .pill b{color:var(--text)}
    .grid{display:grid;grid-template-columns: 1.2fr .8fr;gap:14px;margin-top:14px}
    @media (max-width:900px){.grid{grid-template-columns:1fr} header{flex-direction:column}}
    .card{
      border:1px solid var(--line);border-radius:var(--r);
      background:rgba(17,17,17,.65);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
      overflow:hidden;
    }
    .in{padding:16px}
    .row{display:flex;justify-content:space-between;gap:10px;align-items:center}
    .row h2{margin:0;font-size:13px;letter-spacing:.2px}
    .hint{margin:0;font-size:12px;color:var(--muted)}
    .area{
      margin-top:12px;min-height:340px;border-radius:14px;
      border:1px dashed rgba(255,213,74,.28);
      background:
        radial-gradient(650px 280px at 35% 25%, rgba(255,213,74,.12), transparent 65%),
        rgba(0,0,0,.18);
      display:flex;flex-direction:column;justify-content:center;align-items:center;
      text-align:center;padding:18px;user-select:none;cursor:pointer;
      outline:none;transition: transform .12s ease, border-color .12s ease;
      position:relative;
    }
    .area:hover{border-color: rgba(255,213,74,.45)}
    .area:active{transform: scale(.995)}
    .area:focus-visible{
      border-color: rgba(255,213,74,.70);
      box-shadow: 0 0 0 4px rgba(255,213,74,.10);
    }
    .big{margin:0;font-size:30px;letter-spacing:.2px}
    .small{margin:10px 0 0;font-size:13px;color:var(--muted);max-width:520px;line-height:1.45}
    .badge{
      position:absolute;top:12px;left:12px;
      display:flex;align-items:center;gap:10px;
      padding:8px 10px;border-radius:999px;
      border:1px solid var(--line);background:rgba(0,0,0,.25);
    }
    .dot{width:10px;height:10px;border-radius:999px;background:#333}
    .dot.ready{background:var(--y)}
    .dot.live{background:#35d07f}
    .dot.done{background:#ffb86b}
    .stats{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:12px}
    @media (max-width:420px){.stats{grid-template-columns:1fr}.big{font-size:26px}}
    .stat{
      border:1px solid var(--line);border-radius:14px;background:rgba(0,0,0,.20);
      padding:12px;min-height:72px;
    }
    .label{margin:0 0 6px;font-size:12px;color:var(--muted)}
    .val{margin:0;font-size:20px;font-weight:800;letter-spacing:.2px}
    .val small{font-size:11px;color:var(--muted);font-weight:700;margin-left:6px}
    .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-top:12px}
    .left{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    button{
      border:1px solid var(--line);background:rgba(0,0,0,.25);color:var(--text);
      padding:10px 12px;border-radius:14px;cursor:pointer;font-weight:800;
      transition: background .12s ease, transform .08s ease, border-color .12s ease;
    }
    button:hover{background:rgba(255,255,255,.06)}
    button:active{transform: translateY(1px)}
    button.primary{
      border-color: rgba(255,213,74,.55);
      background: linear-gradient(135deg, rgba(255,213,74,.18), rgba(255,179,0,.10));
    }
    button.danger{border-color: rgba(255,92,122,.45)}
    button:disabled{opacity:.55;cursor:not-allowed}
    .select{
      display:flex;gap:10px;align-items:center;
      border:1px solid var(--line);border-radius:14px;
      background:rgba(0,0,0,.22);padding:10px 12px;
      color:var(--muted);font-size:12px;font-weight:800;
    }
    select{
      appearance:none;border:none;outline:none;background:transparent;
      color:var(--text);font-weight:900;cursor:pointer;
    }
    .list{display:flex;flex-direction:column;gap:10px;margin-top:12px;max-height:420px;overflow:auto;padding-right:6px}
    .item{
      border:1px solid var(--line);border-radius:14px;background:rgba(0,0,0,.20);
      padding:12px;display:flex;justify-content:space-between;gap:10px;align-items:center;
    }
    .meta{display:flex;flex-direction:column;gap:4px}
    .meta b{font-size:13px}
    .meta span{font-size:12px;color:var(--muted)}
    .score{font-weight:900;font-size:16px;white-space:nowrap}
    .toast{
      position:fixed;left:50%;bottom:16px;transform:translateX(-50%);
      background:rgba(0,0,0,.65);border:1px solid rgba(255,255,255,.14);
      color:var(--text);padding:10px 12px;border-radius:14px;
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      opacity:0;pointer-events:none;transition:opacity .18s ease, transform .18s ease;
      font-size:12px;font-weight:800;
    }
    .toast.show{opacity:1;transform:translateX(-50%) translateY(-6px)}
    .kbd{
      display:inline-grid;place-items:center;min-width:26px;height:22px;padding:0 8px;
      border-radius:8px;border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.25);color:var(--text);font-size:11px;font-weight:900;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="icon" aria-hidden="true" title="CPS">
          <!-- simple mouse icon -->
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 2a7 7 0 0 0-7 7v6a7 7 0 0 0 14 0V9a7 7 0 0 0-7-7zm1 2.1A5 5 0 0 1 17 9v1h-4V4.1zM7 9a5 5 0 0 1 4-4.9V12H7V9zm0 5h10v1a5 5 0 0 1-10 0v-1z"/>
          </svg>
        </div>
        <div>
          <h1>CPS Tester</h1>
          <p class="sub">Click inside the box to start. Runs save locally in your browser.</p>
        </div>
      </div>
      <div class="credit">
        <div class="pill">Made by <b>Akash Rawat</b></div>
        <div class="pill"><span class="kbd">Space</span> Start/Stop <span class="kbd">R</span> Reset</div>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <div class="in">
          <div class="row">
            <h2>Test</h2>
            <p class="hint" id="status">Ready</p>
          </div>

          <div class="area" id="area" tabindex="0" role="button" aria-label="CPS click area">
            <div class="badge" aria-live="polite">
              <div class="dot ready" id="dot"></div>
              <span id="phase" style="font-size:12px;color:var(--muted);font-weight:800">Ready</span>
            </div>
            <p class="big" id="title">Click to Start</p>
            <p class="small" id="subtitle">First click starts the timer. Keep clicking until time runs out.</p>
          </div>

          <div class="stats">
            <div class="stat"><p class="label">Clicks</p><p class="val"><span id="clicks">0</span><small>total</small></p></div>
            <div class="stat"><p class="label">Time</p><p class="val"><span id="time">0.00</span><small>sec</small></p></div>
            <div class="stat"><p class="label">CPS</p><p class="val"><span id="cps">0.00</span><small>avg</small></p></div>
            <div class="stat"><p class="label">Best</p><p class="val"><span id="best">—</span><small>saved</small></p></div>
          </div>

          <div class="controls">
            <div class="left">
              <button class="primary" id="start" type="button">Start</button>
              <button id="stop" type="button" disabled>Stop</button>
              <button class="danger" id="reset" type="button">Reset</button>

              <div class="select" title="Test duration">
                <span>Duration</span>
                <select id="dur">
                  <option value="1">1s</option>
                  <option value="2">2s</option>
                  <option value="5" selected>5s</option>
                  <option value="10">10s</option>
                  <option value="15">15s</option>
                  <option value="30">30s</option>
                  <option value="60">60s</option>
                </select>
              </div>
            </div>

            <button id="clear" type="button">Clear History</button>
          </div>
        </div>
      </section>

      <aside class="card">
        <div class="in">
          <div class="row">
            <h2>Recent Runs</h2>
            <p class="hint">Last 12</p>
          </div>
          <div class="list" id="list"></div>
        </div>
      </aside>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    "use strict";

    const $ = (id) => document.getElementById(id);

    const area = $("area");
    const title = $("title");
    const subtitle = $("subtitle");
    const status = $("status");
    const phase = $("phase");
    const dot = $("dot");

    const clicksEl = $("clicks");
    const timeEl = $("time");
    const cpsEl = $("cps");
    const bestEl = $("best");

    const startBtn = $("start");
    const stopBtn = $("stop");
    const resetBtn = $("reset");
    const clearBtn = $("clear");
    const durSel = $("dur");

    const list = $("list");
    const toast = $("toast");

    const KEY = "cps_history_akash_v1";

    let clicks = 0;
    let running = false;
    let done = false;
    let startAt = 0;
    let raf = 0;
    let endTimer = 0;

    const now = () => (performance?.now ? performance.now() : Date.now());

    const fmt = (n) => (Math.round(n * 100) / 100).toFixed(2);

    function toastMsg(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      clearTimeout(toastMsg.t);
      toastMsg.t = setTimeout(() => toast.classList.remove("show"), 1200);
    }

    function setUI(p){
      dot.className = "dot " + p;
      const label = p === "ready" ? "Ready" : p === "live" ? "Live" : "Done";
      phase.textContent = label;
      status.textContent = label;

      if(p === "ready"){
        title.textContent = "Click to Start";
        subtitle.textContent = "First click starts the timer. Keep clicking until time runs out.";
      }else if(p === "live"){
        title.textContent = "Click Fast";
        subtitle.textContent = "Stay inside the box. Space can stop early.";
      }else{
        title.textContent = "Finished";
        subtitle.textContent = "Reset to try again, or change duration and start.";
      }

      startBtn.disabled = running;
      stopBtn.disabled = !running;
      durSel.disabled = running;
    }

    function getHistory(){
      try{
        const raw = localStorage.getItem(KEY);
        const data = raw ? JSON.parse(raw) : [];
        return Array.isArray(data) ? data : [];
      }catch{
        return [];
      }
    }

    function saveHistory(rows){
      try{ localStorage.setItem(KEY, JSON.stringify(rows)); }catch{}
    }

    function updateBest(){
      const h = getHistory();
      if(!h.length){ bestEl.textContent = "—"; return; }
      let best = 0;
      for(const r of h) if(typeof r.cps === "number") best = Math.max(best, r.cps);
      bestEl.textContent = fmt(best);
    }

    function render(){
      const h = getHistory();
      list.innerHTML = "";

      if(!h.length){
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `<div class="meta"><b>No runs yet</b><span>Do a test to see results here.</span></div><div class="score">—</div>`;
        list.appendChild(div);
        return;
      }

      for(const r of h.slice(0,12)){
        const d = new Date(r.ts || Date.now());
        const when = d.toLocaleString(undefined, {year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"});
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML =
          `<div class="meta"><b>${r.duration}s • ${r.clicks} clicks</b><span>${when}</span></div>` +
          `<div class="score">${fmt(r.cps)} CPS</div>`;
        list.appendChild(div);
      }
    }

    function reset(){
      cancelAnimationFrame(raf);
      clearTimeout(endTimer);
      clicks = 0; running = false; done = false; startAt = 0;

      clicksEl.textContent = "0";
      timeEl.textContent = "0.00";
      cpsEl.textContent = "0.00";

      setUI("ready");
    }

    function tick(){
      if(!running) return;

      const elapsed = (now() - startAt) / 1000;
      const dur = Number(durSel.value) || 5;
      const t = Math.min(elapsed, dur);

      timeEl.textContent = fmt(t);
      cpsEl.textContent = fmt(clicks / Math.max(0.05, t));

      raf = requestAnimationFrame(tick);
    }

    function saveRun(finalTime){
      const dur = Number(durSel.value) || 5;
      const cps = clicks / Math.max(0.001, finalTime);

      const h = getHistory();
      h.unshift({ ts: Date.now(), duration: dur, clicks, cps });
      saveHistory(h.slice(0,12));
      render();
      updateBest();
    }

    function finish(){
      if(!running) return;

      running = false; done = true;
      cancelAnimationFrame(raf);
      clearTimeout(endTimer);

      const dur = Number(durSel.value) || 5;
      timeEl.textContent = fmt(dur);
      cpsEl.textContent = fmt(clicks / Math.max(0.001, dur));

      setUI("done");
      saveRun(dur);
      toastMsg("Saved");
    }

    function start(){
      if(running) return;
      if(done) reset();

      clicks = 0;
      clicksEl.textContent = "0";
      timeEl.textContent = "0.00";
      cpsEl.textContent = "0.00";

      running = true; done = false;
      startAt = now();

      setUI("live");
      tick();

      const dur = Number(durSel.value) || 5;
      endTimer = setTimeout(finish, dur * 1000);
    }

    function stopEarly(){
      if(!running) return;

      const elapsed = (now() - startAt) / 1000;

      running = false; done = true;
      cancelAnimationFrame(raf);
      clearTimeout(endTimer);

      timeEl.textContent = fmt(elapsed);
      cpsEl.textContent = fmt(clicks / Math.max(0.001, elapsed));

      setUI("done");
      saveRun(Math.max(0.001, elapsed));
      toastMsg("Stopped");
    }

    function click(){
      if(!running && !done) start();
      if(!running) return;

      clicks++;
      clicksEl.textContent = String(clicks);
    }

    area.addEventListener("mousedown", (e) => { if(e.button === 0) click(); });
    area.addEventListener("dragstart", (e) => e.preventDefault());

    area.addEventListener("keydown", (e) => {
      if(e.code === "Space"){ e.preventDefault(); running ? stopEarly() : start(); }
      if(e.key.toLowerCase() === "r"){ e.preventDefault(); reset(); toastMsg("Reset"); }
    });

    startBtn.addEventListener("click", () => { area.focus(); start(); });
    stopBtn.addEventListener("click", () => { area.focus(); stopEarly(); });
    resetBtn.addEventListener("click", () => { area.focus(); reset(); toastMsg("Reset"); });

    clearBtn.addEventListener("click", () => {
      localStorage.removeItem(KEY);
      render();
      updateBest();
      toastMsg("Cleared");
    });

    reset();
    render();
    updateBest();
    area.focus();
  </script>
</body>
</html>
